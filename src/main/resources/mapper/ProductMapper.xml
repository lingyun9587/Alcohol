<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.alcohol.mapper.ProductMapper">
    <resultMap id="selectProductBySkuIdProductId" type="com.alcohol.pojo.Sku">
        <id column="sku_id" property="skuId"/>
        <result column="stock" property="stock"/>
        <collection property="product" ofType="com.alcohol.pojo.Product">
            <id column="product_id" property="productId"/>
            <result column="product_name" property="productName"/>
            <result column="product_desc" property="productDese"/>
            <result column="product_details" property="productDetails"/>
            <result column="create_time" property="createTime"/>
            <result column="status" property="status"/>
            <result column="sales" property="sales"/>
        </collection>
        <collection property="skuValue" ofType="com.alcohol.pojo.SkuValue">
            <id column="skuvalue_id" property="skuvalueId"/>
            <result column="skuvalue_value" property="skuvalueValue"/>
        </collection>
    </resultMap>
    <select id="selectProductBySkuIdAndProductId" resultMap="selectProductBySkuIdProductId">
          SELECT sku.`sku_id`,sku.`stock`,sku.`product_id`,p.`product_id`,
p.`product_name`,sku.`skuvalue_id`,skuv.`skuvalue_id`,skuv.`skuvalue_value`,skun.*
FROM tb_sku sku,tb_product p,tb_skuvalue skuv,tb_skuname skun
WHERE sku.`product_id`=p.`product_id`
  AND sku.`skuvalue_id`=skuv.`skuvalue_id`
  AND skuv.`skuname_id`=skun.`skuname_id`
  <if test="productId!=null">
      AND p.`product_id`=#{productId}
  </if>
  <if test="skuId!=null">
      AND sku.`sku_id`=#{skuId};
  </if>
    </select>


</mapper>